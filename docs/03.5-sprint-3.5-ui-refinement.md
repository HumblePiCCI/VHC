# Sprint 3.5: UI/UX Refinement

**Status:** âœ… COMPLETE | **Dates:** Dec 6-18, 2025
**Goal:** Polish HERMES Messaging + Forum UI/UX before Sprint 4

> ğŸ“ **Implementation Details:** [archive/sprints/03.5-implementation-details.md](archive/sprints/03.5-implementation-details.md)
> ğŸ¨ **Dev Color Panel:** [dev-color-panel.md](dev-color-panel.md)

---

## Guiding Principles

1. **Polish Over Features:** No new functionality â€” refinement only
2. **User-Driven:** Issues from real usage testing
3. **Light Touch:** Minimal code, maximum UX impact
4. **No Regressions:** All existing tests must pass

## Engineering Status

| Metric | Value |
|--------|-------|
| LOC Cap | âœ… 346 max (CommentStream.tsx) |
| Component Tests (HERMES) | âœ… 335 passing |
| E2E Tests | âœ… 10 passing |
| Browser-Safe | âœ… No `node:*` imports |
| Accessibility | â³ Lighthouse A11y â‰¥ 90 |

## Privacy Alignment (Active)

- **Handles:** Local-first, opt-in sharing via QR/copy; not in public directory
- **Constituency:** Per-user proofs stay local; only global aggregates shown; **N=20** cohort threshold
- **"Other Districts":** Deferred to Sprint 4 (requires Guardian Node)

## What Shipped

- Threaded CommentStream with stance-based connectors (left/right, discuss step)
- SlideToPost gesture for stance selection + submission
- Tri-state stance: Support / Discuss / Oppose
- 3D card flip: VENN analysis â†” HERMES forum
- Conversation summary in nested card with lighter text + icon-only actions
- Engagement icons with glow states (viewed/engaged)
- Handles + ID Chip with QR/copy sharing
- Dev Color Panel with 57 CSS variables
- Real-time comment updates with collapse/expand

## Routes

| Route | Content |
|-------|---------|
| `/hermes` | Forum feed |
| `/hermes/$threadId` | Thread view |
| `/hermes/messages` | Messages |

## Key Decisions (Active)

| Decision | Impact |
|----------|--------|
| Tri-state stance | Comments are `concur` / `counter` / `discuss` |
| Connector geometry | Left for support/discuss, right for oppose |
| Discuss branch width | 11px branch with step-in connector |
| LOC cap | 350 lines/file enforced |
| Handle privacy | Handles remain local-only, not in directory |

## Phase Summary

| Phase | Description | Status |
|-------|-------------|--------|
| 1-5 | Foundation (schema, handles, flip, bugs, CI) | âœ… |
| 6.0-6.3 | Design unification, color panel, ThreadView | âœ… |
| 7.0 | Tri-state stance schema | âœ… |
| 7.1 | CommentStream, SlideToPost, tree connectors, LOC refactor | âœ… |

## Testing Checklist

### Forum
- [x] Threaded stream + stance connectors âœ…
- [x] Summary card + action icons âœ…
- [x] Zoom + nested debate âœ…
- [ ] Vote persistence

### Messaging
- [x] ID Chip fixed at top âœ…
- [x] ğŸ’¬ navbar icon âœ…
- [x] Handle display with discriminators âœ…

### Regression
- [x] 335 unit tests âœ…
- [x] 10 E2E tests âœ…

## Exit Criteria

| Criteria | Status |
|----------|--------|
| Phase 1-5 complete | âœ… |
| Phase 6 complete (design unification) | âœ… |
| Phase 6.1 complete (visual refinements) | âœ… |
| Phase 6.2 complete (Dev Color Panel) | âœ… |
| Phase 6.3 complete (ThreadView consolidation) | âœ… |
| Phase 7.0 complete (tri-state stance) | âœ… |
| Phase 7.1 complete (CommentStream + SlideToPost) | âœ… |
| Tests passing (unit + E2E) | âœ… |
| CI green | âœ… |
